pipeline {
    agent any
    environment {
        OWNER="lexedwards"
        REPO="testpkg"
        COMMIT_MESSAGE = sh(script: "git log -1 --pretty=%B",,returnStdout: true).trim()
    }
    stages {
        stage("Variables") {
            steps {
                sh "printenv"
            }
        }
        stage("Version Check") {
            steps {
                sh "node --version"
                sh "npm --version"
                sh "git --version"
            }
        }
        stage("Lint commit") {
            steps {
                sh "npx @lexedwards lint $COMMIT_MESSAGE"
            }
        }
    }
}